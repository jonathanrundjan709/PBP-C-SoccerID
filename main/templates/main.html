{% extends "base.html" %}
{% load static %}

{% block meta %}
<title>Products · SoccerID</title>
{% endblock meta %}

{% block content %}
<!-- Heading + Actions -->
<div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6">
  <div>
    <h1 class="text-2xl font-semibold tracking-tight text-brand-dark">Katalog Produk</h1>
    <p class="text-slate-600">Jelajahi, tambahkan, dan kelola item kamu.</p>
  </div>
  <div class="flex items-center gap-2">
    <a href="{% url 'main:add_product' %}" 
       class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-brand text-white hover:bg-brand-dark transition">
      <span>＋</span> Tambah Produk
    </a>
  </div>
</div>

<!-- Filter pills -->
<div class="flex items-center gap-2 mb-6">
  {% with current_q=request.GET.q|urlencode %}
    {% with current_filter=request.GET.filter|default:'all' %}
      <a href="?filter=all{% if current_q %}&q={{ current_q }}{% endif %}"
         class="inline-flex items-center justify-center px-4 py-2 rounded-xl border transition
                {% if current_filter == 'all' %}
                  bg-brand text-white border-brand hover:bg-brand-dark
                {% else %}
                  bg-white text-slate-700 border-slate-300 hover:border-brand hover:text-brand
                {% endif %}">
        All Products
      </a>

      <a href="?filter=mine{% if current_q %}&q={{ current_q }}{% endif %}"
         class="inline-flex items-center justify-center px-4 py-2 rounded-xl border transition
                {% if current_filter == 'mine' %}
                  bg-brand text-white border-brand hover:bg-brand-dark
                {% else %}
                  bg-white text-slate-700 border-slate-300 hover:border-brand hover:text-brand
                {% endif %}">
        My Products
      </a>
    {% endwith %}
  {% endwith %}
</div>

{% if product_list|length == 0 %}
  <section class="text-center py-20 bg-white rounded-2xl border border-slate-200">
    <div class="mx-auto max-w-md">
      {# Pastikan path ke static benar; biasanya TANPA 'main/static/' #}
      <img src="{% static 'image/no-news.png' %}" alt="No products"
           class="mx-auto w-48 mb-6" />
      <h2 class="text-xl font-semibold text-slate-800">Belum ada produk</h2>
      <p class="text-slate-600 mt-1">Tambahkan produk pertamamu untuk mengisi katalog.</p>
      <a href="{% url 'main:add_product' %}"
         class="mt-4 inline-flex items-center px-4 py-2 rounded-lg bg-brand text-white hover:bg-brand-dark transition">
        + Tambah Produk
      </a>
    </div>
  </section>
{% else %}
  <!-- Grid cards -->
  <section class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
    {% for product in product_list %}
      {% include "card_product.html" with product=product %}
    {% endfor %}
  </section>
{% endif %}

{% endblock content %}
